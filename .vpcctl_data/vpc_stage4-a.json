{
  "name": "stage4-a",
  "cidr": "10.40.0.0/16",
  "bridge": "br-stage4-a",
  "subnets": [
    {
      "name": "public",
      "cidr": "10.40.1.0/24",
      "ns": "ns-stage4-a-public",
      "gw": "10.40.1.1",
      "host_ip": "10.40.1.2",
      "veth": "v-stage4-a-publ"
    },
    {
      "name": "private",
      "cidr": "10.40.2.0/24",
      "ns": "ns-stage4-a-private",
      "gw": "10.40.2.1",
      "host_ip": "10.40.2.2",
      "veth": "v-stage4-a-priv"
    }
  ],
  "host_iptables": [
    [
      "iptables",
      "-A",
      "vpc-stage4-a",
      "-s",
      "10.40.0.0/16",
      "-d",
      "10.40.0.0/16",
      "-m",
      "comment",
      "--comment",
      "vpcctl:stage4-a:intra",
      "-j",
      "ACCEPT"
    ],
    [
      "iptables",
      "-t",
      "nat",
      "-A",
      "POSTROUTING",
      "-s",
      "10.40.0.0/16",
      "-o",
      "eth0",
      "-m",
      "comment",
      "--comment",
      "vpcctl:stage4-a:nat",
      "-j",
      "MASQUERADE"
    ],
    [
      "iptables",
      "-A",
      "FORWARD",
      "-i",
      "br-stage4-a",
      "-o",
      "eth0",
      "-m",
      "comment",
      "--comment",
      "vpcctl:stage4-a:fwd-out",
      "-j",
      "ACCEPT"
    ],
    [
      "iptables",
      "-A",
      "FORWARD",
      "-i",
      "eth0",
      "-o",
      "br-stage4-a",
      "-m",
      "state",
      "--state",
      "ESTABLISHED,RELATED",
      "-m",
      "comment",
      "--comment",
      "vpcctl:stage4-a:fwd-in",
      "-j",
      "ACCEPT"
    ],
    [
      "iptables",
      "-A",
      "vpc-stage4-a",
      "-o",
      "br-stage4-b",
      "-s",
      "10.40.1.0/24",
      "-d",
      "10.40.1.0/24",
      "-m",
      "comment",
      "--comment",
      "vpcctl:peer:stage4-a:stage4-b",
      "-j",
      "ACCEPT"
    ],
    [
      "iptables",
      "-A",
      "vpc-stage4-a",
      "-o",
      "br-stage4-b",
      "-s",
      "10.40.1.0/24",
      "-d",
      "10.50.1.0/24",
      "-m",
      "comment",
      "--comment",
      "vpcctl:peer:stage4-a:stage4-b",
      "-j",
      "ACCEPT"
    ],
    [
      "iptables",
      "-A",
      "vpc-stage4-a",
      "-o",
      "br-stage4-b",
      "-s",
      "10.50.1.0/24",
      "-d",
      "10.40.1.0/24",
      "-m",
      "comment",
      "--comment",
      "vpcctl:peer:stage4-a:stage4-b",
      "-j",
      "ACCEPT"
    ],
    [
      "iptables",
      "-A",
      "vpc-stage4-a",
      "-o",
      "br-stage4-b",
      "-s",
      "10.50.1.0/24",
      "-d",
      "10.50.1.0/24",
      "-m",
      "comment",
      "--comment",
      "vpcctl:peer:stage4-a:stage4-b",
      "-j",
      "ACCEPT"
    ],
    [
      "iptables",
      "-A",
      "vpc-stage4-a",
      "-o",
      "br-stage4-b",
      "-m",
      "comment",
      "--comment",
      "vpcctl:peer-drop:stage4-a:stage4-b",
      "-j",
      "DROP"
    ]
  ],
  "chain": "vpc-stage4-a",
  "apps": [],
  "peers": [
    {
      "peer_vpc": "stage4-b",
      "veth_a": "pv-stage4-a-sta",
      "veth_b": "pv-stage4-a-stb",
      "allowed": [
        "10.40.1.0/24",
        "10.50.1.0/24"
      ]
    }
  ],
  "nat": {
    "interface": "eth0"
  }
}